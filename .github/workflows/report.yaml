name: Report

on:
  workflow_run:
    workflows: [CI]
    types: [completed]

permissions:
  contents: read
  actions: read
  checks: write

jobs:
  test-results:
    runs-on: ubuntu-latest
    steps:
    - uses: dorny/test-reporter@fe45e9537387dac839af0d33ba56eed8e24189e8 # v2.3.0
      with:
        artifact: test-results
        name: go test
        path: unit-tests.json
        reporter: golang-json
